@Component
script ThrowSnailShell1 extends SkillParent

	property table spawnedMissiles = {}

	@ExecSpace("Client")
	method void ActivateSkill()
		__base:ActivateSkill()
		
		if self._T.projectileParent == nil then
			self._T.projectileParent = _EntityService:GetEntityByPath(_GameManager:GetGameMapName().."/ProjectileParent")
		end
		
		local basePos = self.Entity.TransformComponent.WorldPosition
		
		-- 발사체 1개 생성
		local missile = _SpawnService:SpawnByModelId("model://cd38ad89-1c52-45f2-8d86-d6be27475ba9",
		     "snailShell_1",
		     basePos + Vector3(0, 0.4, 0),
		     self._T.projectileParent)
		
		missile.SpriteRendererComponent.SpriteRUID = "927d463a046b48869cffa1eeaf8e3f5a"
		missile.Projectile:SetCaster(self.Entity.Parent)
		
		-- 0.25초 후 발사
		_TimerService:SetTimerOnce(function()
		    missile.Projectile:SetShoot("927d463a046b48869cffa1eeaf8e3f5a",
		        self:IsTargetOnRight(self.target),
		        self.skillProjectileSpeed,
		        self.target,
		        false,
		        self.skillAmount)
		
		    -- 스킬 사용 완료 처리
		    self.caster.Unit.isUsingSkill = false
		end, 0.25)
	end

end