@Logic
script TermService extends Logic

	@ExecSpace("Server")
	method integer SAVE(string uid)
		local ds = _DataStorageService:GetUserDataStorage(uid)
		
		local data = {}
		
		data["isTermAgree"] = 1
		
		local save =  _HttpService:JSONEncode(data)
		
		return ds:SetAndWait("USER_TERM_AGREE",save)
		
	end

	@ExecSpace("Server")
	method integer LOAD(string uid)
		local ds = _DataStorageService:GetUserDataStorage(uid)
		
		local errCode, res = ds:GetAndWait("USER_TERM_AGREE")
		if errCode ~= 0 then
			return errCode
		end
		
		if res == nil then
			return 0
		end
		
		local resTable = _HttpService:JSONDecode(res)
		
		return resTable["isTermAgree"]
	end

	@ExecSpace("Client")
	method void AgreePopupOn()
		local ui = _EntityService:GetEntityByPath("/ui/TermUI")
			
		ui.Enable = true
		ui.Visible = true
	end

end